(function(e){function t(t){for(var r,o,c=t[0],l=t[1],i=t[2],s=0,h=[];s<c.length;s++)o=c[s],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&h.push(a[o][0]),a[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);d&&d(t);while(h.length)h.shift()();return u.push.apply(u,i||[]),n()}function n(){for(var e,t=0;t<u.length;t++){for(var n=u[t],r=!0,c=1;c<n.length;c++){var l=n[c];0!==a[l]&&(r=!1)}r&&(u.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={app:0},u=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/scheduler/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var i=0;i<c.length;i++)t(c[i]);var d=l;u.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"245a":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23");function a(e,t,n,a,u,o){var c=Object(r["j"])("Table");return Object(r["h"])(),Object(r["d"])(r["a"],null,[Object(r["m"])(Object(r["e"])("input",{id:"start","onUpdate:modelValue":t[0]||(t[0]=function(e){return u.date=e}),min:"2020-12",name:"start",type:"month"},null,512),[[r["l"],u.date]]),Object(r["f"])(c,{date:o.dateOnFirstDayOfMonth},null,8,["date"])],64)}n("fb6a"),n("b0c0");var u={border:"1"},o=Object(r["e"])("caption",null," Расписание ",-1),c={key:0},l=Object(r["e"])("th",null,"ФИО",-1),i=Object(r["e"])("th",null,"Должность",-1),d=Object(r["e"])("th",{class:"summary"},"Всего",-1),s=Object(r["e"])("th",{class:"summary"},"Ночных",-1),h=Object(r["e"])("th",{class:"summary"},"Празд.",-1),b=["onUpdate:modelValue"],f=["onUpdate:modelValue"],p=["onUpdate:modelValue"];function O(e,t,n,a,O,j){return Object(r["h"])(),Object(r["d"])(r["a"],null,[Object(r["e"])("td",null,[Object(r["e"])("table",u,[o,(Object(r["h"])(!0),Object(r["d"])(r["a"],null,Object(r["i"])(O.monthYearToSchedule.get(j.dateString),(function(e,t){return Object(r["h"])(),Object(r["d"])(r["a"],{key:e.id+t},[0===t?(Object(r["h"])(),Object(r["d"])("tr",c,[l,i,(Object(r["h"])(!0),Object(r["d"])(r["a"],null,Object(r["i"])(j.allDaysInMonth,(function(e,t){return Object(r["h"])(),Object(r["d"])("th",{key:e.getUTCMilliseconds()+t,class:Object(r["g"])({weekend:j.isWeekend(e)})},Object(r["k"])(e.toLocaleDateString("ru").slice(0,2)),3)})),128)),d,s,h])):Object(r["c"])("",!0),Object(r["e"])("tr",null,[Object(r["e"])("th",null,[Object(r["m"])(Object(r["e"])("textarea",{"onUpdate:modelValue":function(t){return e.name=t}},null,8,b),[[r["l"],e.name]])]),Object(r["e"])("th",null,[Object(r["m"])(Object(r["e"])("textarea",{"onUpdate:modelValue":function(t){return e.function=t}},null,8,f),[[r["l"],e.function]])]),(Object(r["h"])(!0),Object(r["d"])(r["a"],null,Object(r["i"])(e.schedule,(function(t,n){return Object(r["h"])(),Object(r["d"])("td",{key:e.name+n},[Object(r["m"])(Object(r["e"])("input",{"onUpdate:modelValue":function(e){return t.raw=e},class:"hours",maxlength:"4"},null,8,p),[[r["l"],t.raw]])])})),128)),Object(r["e"])("td",null,Object(r["k"])(j.sumHours(e)),1),Object(r["e"])("td",null,Object(r["k"])(j.sumHours(e,"н")),1),Object(r["e"])("td",null,Object(r["k"])(j.sumHours(e,"п")),1)])],64)})),128))])]),Object(r["e"])("button",{onClick:t[0]||(t[0]=function(){return j.addEmployee&&j.addEmployee.apply(j,arguments)})},"Добавить работника"),Object(r["e"])("button",{onClick:t[1]||(t[1]=function(){return j.generateCSVString&&j.generateCSVString.apply(j,arguments)})},"Скачать")],64)}n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("d81d"),n("4de4"),n("caad"),n("2532"),n("159b"),n("2b3d"),n("9861");var j={computed:{allDaysInMonth:function(){var e=new Date(this.date),t=[];while(e.getMonth()===this.date.getMonth())t.push(new Date(e)),e.setDate(e.getDate()+1);return t},dateString:function(){return console.log("dateString "+this.date),this.date.toLocaleDateString()},daysInMonth:function(){return new Date(this.date.getFullYear(),this.date.getMonth()+1,0).getDate()}},name:"Table",props:{date:Date},data:function(){return{monthYearToSchedule:new Map([[this.dateString,[]]])}},methods:{isWeekend:function(e){return!(e.getDay()%6)},sumHours:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.schedule.map((function(e){return e.raw})).filter((function(e){return parseFloat(e)})).filter((function(e){return null==t||e.toLowerCase().includes(t)})).map((function(e){return parseFloat(e)})).reduce((function(e,t){return e+t}),0)},initScheduleIfNeeded:function(){this.monthYearToSchedule.has(this.dateString)||this.monthYearToSchedule.set(this.dateString,[])},addEmployee:function(){this.initScheduleIfNeeded();for(var e=[],t=0;t<this.daysInMonth;t++)e.push({raw:null});this.monthYearToSchedule.get(this.dateString).push({name:"Фамилия",schedule:e,id:Math.floor(100*Math.random())})},generateCSVString:function(){var e=this,t="\ufeffРасписание,\n";t+=",",this.allDaysInMonth.forEach((function(e){return t+=e.toLocaleDateString("ru").slice(0,2)+","})),t+="Всего, Ночных, Празд.\n";var n=this.monthYearToSchedule.get(this.dateString);null===n||void 0===n||n.forEach((function(n){t+=n.name+",",n.schedule.forEach((function(e){return t+=(e.raw?e.raw:0)+","})),t+=e.sumHours(n)+",",t+=e.sumHours(n,"н")+",",t+=e.sumHours(n,"п")+"\n"}));var r=new Blob([t],{type:"text/csv;charset=UTF-8"}),a=document.createElement("a"),u=URL.createObjectURL(r);return a.href=u,a.download=this.date.toLocaleDateString("ru").slice(0,5)+".csv",document.body.appendChild(a),a.click(),setTimeout((function(){document.body.removeChild(a),window.URL.revokeObjectURL(u)}),0),t}}},m=(n("d313"),n("6b0d")),g=n.n(m);const y=g()(j,[["render",O]]);var v=y,S={name:"App",components:{Table:v},data:function(){return{date:null}},computed:{dateOnFirstDayOfMonth:function(){var e=null==this.date?new Date:new Date(this.date);return new Date(e.getFullYear(),e.getMonth(),1)}}};const w=g()(S,[["render",a]]);var D=w;Object(r["b"])(D).mount("#app")},d313:function(e,t,n){"use strict";n("245a")}});
//# sourceMappingURL=app.eb98869b.js.map